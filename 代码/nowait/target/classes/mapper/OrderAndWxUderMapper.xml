<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yjg.mapper.OrderAndWxUderMapper">


	<!--联合查询包括openid且订单有效的所有订单信息-->
	<select id="listOWById" resultType="com.yjg.vo.OrderAndWxUser" parameterType="java.lang.Integer">
		SELECT tb_order.*,tb_wxuser.openId openId FROM tb_order,tb_wxuser WHERE tb_order.wxuserId=tb_wxuser.id AND tb_order.restId=#{id} AND isUsage='是'
	</select>
	<!--根据订单id查询包括openid的订单信息-->
	<select id="ByOWId" resultType="com.yjg.vo.OrderAndWxUser" parameterType="java.lang.Integer">
		SELECT tb_order.*,tb_wxuser.openId openId FROM tb_order,tb_wxuser WHERE tb_order.wxuserId=tb_wxuser.id AND tb_order.id=#{id}
	</select>

</mapper>